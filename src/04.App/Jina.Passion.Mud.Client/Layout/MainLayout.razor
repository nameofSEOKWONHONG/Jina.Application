@using Microsoft.AspNetCore.Components.Authorization
@using Jina.Passion.Mud.Client.Pages.Account
@inherits LayoutComponentBase

<MudThemeProvider @ref="_themeProvider" @bind-IsDarkMode="_isDarkMode"/>
<MudPopoverProvider/>
<MudSnackbarProvider/>
<MudDialogProvider FullWidth="true"/>

<MudLayout>
    <AuthorizeView>
        <NotAuthorized>
            <Login/>
        </NotAuthorized>
        <Authorized>
            <MudLayout>
                <CascadingValue Value="_themeProvider">
                    <MainBody @bind-IsDarkMode="_isDarkMode">
                        @* <ErrorBoundary> *@
                        @Body
                        @* </ErrorBoundary> *@
                    </MainBody>                    
                </CascadingValue>
            </MudLayout>
        </Authorized>
    </AuthorizeView>
</MudLayout>

@code {
    private MudThemeProvider _themeProvider;
    private bool _isDarkMode;

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

}